<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta name="GENERATOR" content="Mozilla/4.75C-CCK-MCD {C-UDP; EBM-APPLE} (Macintosh; U; PPC) [Netscape]">
   <title>Project Start</title>
</head>
<body text="#000000" bgcolor="#FFFFFF">
<p><em><span style="font-family: tahoma, sans-serif; font-size: 12pt;">17 Sep 2013: UPDATE: The text was edited to be more up to date with the current configuration of the SOCS machines.</span></em></p>
<p><strong><span style="font-family: tahoma, sans-serif; font-size: 12pt;">&nbsp;</span></strong></p>
<p><strong><span style="font-family: tahoma, sans-serif; font-size: 12pt;">The following is a description of the different steps you have to perform to run the existing project code.</span></strong></p>
<p><strong><span style="font-family: tahoma, sans-serif; font-size: 12pt;">&nbsp;</span></strong></p>
<p><strong><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Distributed components:</span></strong></p>
<p><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Two distinct hosts are involved:</span></p>
<ul>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">The server host - machine on which the remote server and its registry are running</span></li>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">The client host - machine on which the client is running</span></li>
</ul>
<p><span style="font-family: tahoma, sans-serif; font-size: 12pt;">You should be able to use the following machines for your project:</span></p>
<ul>
<li><span style="font-family: 'courier new', courier, sans-serif; font-size: 12pt;">labX-XX &nbsp; labX-XX.cs.mcgill.ca &nbsp; &nbsp;(Trottier lab machines)</span></li>
<li><span style="font-family: 'courier new', courier, sans-serif; font-size: 12pt;">teaching &nbsp;teaching.cs.mcgill.ca</span></li>
</ul>
<p><strong><span style="font-family: tahoma, sans-serif; font-size: 12pt;">&nbsp;</span></strong></p>
<p><strong><span style="font-family: tahoma, sans-serif; font-size: 12pt;">The RMI Registry:</span></strong></p>
<p><span style="font-family: tahoma, sans-serif; font-size: 12pt;">We have started <span style="font-family: 'courier new', courier, sans-serif;">rmiregistry</span> on <span style="font-family: 'courier new', courier, sans-serif;">teaching</span>. You can use this machine for running your server program.</span></p>
<p><strong><span style="font-family: tahoma, sans-serif; font-size: 12pt;">&nbsp;</span></strong></p>
<p><strong><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Creating a Server:</span></strong></p>
<ul>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Go to any of your directories, e.g., </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">$HOME_of_ProjectPartner1/somewhere</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> and copy </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">servercode.tar</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> into the directory.<br /><br /></span></li>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Enter the directory and extract </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">servercode.tar</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> there:<br /><span style="font-family: 'courier new', courier, sans-serif; font-size: 12pt;">&nbsp; &nbsp; tar -xvf servercode.tar<br /><br /></span></span></li>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">The directory will have a subdirectory </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">servercode</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> and a file </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">java.policy</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;">.<br /><br /></span></li>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Enter the </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">servercode</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> directory. The next commands have to be called while being in directory </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">$HOME_of_ProjectPartner1/somewhere/servercode</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;">.<br /><br /></span></li>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">The source code in </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">servercode</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> consists of two packages, each in its own directory:</span></li>
<ul>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">The interface package </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">ResInterface</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;">. It only contains the interface definition of the Resource Manager.</span></li>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">The implementation package </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">ResImpl</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;">. It only contains the implementation of the Resource Manager.<br /><br /></span></li>
</ul>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Please edit </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">ResImpl/ResourceManagerImpl.java</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> and change in the line&nbsp;<br /><span style="font-family: 'courier new', courier, sans-serif; font-size: 12pt;">&nbsp; &nbsp; registry.rebind("MyGroupResourceManager", rm);&nbsp;<br /><span style="font-family: tahoma, sans-serif; font-size: 12pt;">the substring </span><span style="font-size: 12pt;">"MyGroup"</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> to your group name. You can also change it to anything that will make it unique. Otherwise, if two or more of you run the server at the same time on the same machine you will override each other's implementations.<br /><br /></span></span></span></li>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Make sure that the current directory is included in the CLASSPATH. Something like the following might (or might not) work:&nbsp;<br /><span style="font-family: 'courier new', courier, sans-serif; font-size: 12pt;">&nbsp; &nbsp; export CLASSPATH=$HOME_of_ProjectPartner1/somewhere/servercode<br /><br /></span></span></li>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Compile the interface package and generate a jar file:&nbsp;<br /><span style="font-family: 'courier new', courier, sans-serif; font-size: 12pt;">&nbsp; &nbsp; javac ResInterface/ResourceManager.java<br /><span style="font-size: 12pt;">&nbsp; &nbsp; jar cvf ResInterface.jar ResInterface/*.class<br /><br /></span></span></span></li>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Compile the implementation package (no jar file needed):&nbsp;<br /><span style="font-family: 'courier new', courier, sans-serif; font-size: 12pt;">&nbsp; &nbsp; javac ResImpl/ResourceManagerImpl.java<br /><br /></span></span></li>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Ensure that the class and jar files are world-readable and the directories along the path </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">$HOME_of_ProjectPartner1/somewhere/servercode</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> are world-executable. The </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">rmiregistry</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> and the client will get the proxy files from this directory.<br /><br /></span></li>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Run the server on a machine on which an </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">rmiregistry</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> instance is running:&nbsp;<br /><span style="font-family: 'courier new', courier, sans-serif; font-size: 12pt;">&nbsp; &nbsp; java -Djava.security.policy=server.policy -<span style="font-size: 12pt;">Djava.rmi.server.codebase=file:$HOME_of_ProjectPartner1/somewhere/servercode/&nbsp;<span style="font-size: 12pt;">ResImpl.ResourceManagerImpl<br /><br /></span></span></span></span></li>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">If you get an exception at this point, it means that you have a problem with paths or executable names.</span></li>
</ul>
<p><span style="font-family: tahoma, sans-serif; font-size: 12pt;">&nbsp;</span></p>
<p><strong><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Setting up a Client:</span></strong></p>
<p><span style="font-family: tahoma, sans-serif; font-size: 12pt;">We provide you with the implementation of an interactive client (thanks to Beibei Zou, Chenliang Sun and Nomair Naeem).</span></p>
<ul>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Extract </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">clientsrc.tar</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;">, e.g., in the directory </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">$HOME_of_ProjectPartner2/somewhere</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;">. The directory will contain a subdirectory </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">clientsrc</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> with a </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">client.java</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> file and a </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">client.policy</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> file. Information on how to use the client can be found in <span style="font-family: 'courier new', courier, sans-serif;">ClientUserGuide.pdf</span>.<br /><br /></span></li>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Edit the file </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">client.java</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;">. Change in the line <br /></span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">&nbsp; &nbsp; ResourceManager rm = (ResourceManager) registry.lookup("MyGroupResourceManager");</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> <br />the substring </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">"MyGroup"</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> to your group name.<br /><br /></span></li>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">In order for the client to compile it needs the interface class file. Copy the </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">ResInterface.jar</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> from </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">$HOME_of_ProjectPartner1/somewhere</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;">&nbsp;into </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">$HOME_of_ProjectPartner2/somewhereelse</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;">. (In order to pretend to be truly distributed, don't use the Partner1 directories.)<br /><br /></span></li>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Set the CLASSPATH correctly, maybe with something like: <br /></span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">&nbsp; &nbsp; export CLASSPATH=$HOME_of_ProjectPartner2/somewhere/clientsrc:$HOME_of_ProjectPartner2/somewhereelse/ResInterface.jar<br /><br /></span></li>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Compile the client: <br /></span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">&nbsp; &nbsp; javac client.java<br /><br /></span></li>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Run the client code on a different machine than the server:&nbsp;<br /></span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">&nbsp; &nbsp; java -Djava.security.policy=client.policy client servermachine&nbsp;<br /><br /></span></li>
<li><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Here, </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">servermachine</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> should indicate the machine the server and </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">rmiregistry</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> are running on. For example, if you run the server on </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">teaching</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> and the client on </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">lab2-3</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;">, then replace </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">servermachine</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> above with </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">teaching</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;">. If you run the client on the same machine as the server, you can omit the </span><span style="font-size: 12pt; font-family: 'courier new', courier, sans-serif;">servermachine</span><span style="font-family: tahoma, sans-serif; font-size: 12pt;"> parameter.</span></li>
</ul>
<p><span style="font-family: tahoma, sans-serif; font-size: 12pt;">&nbsp;</span></p>
<p><span style="font-family: tahoma, sans-serif; font-size: 12pt;">Did it work? Congratulations! Now you are ready for the "real" stuff!</span></p>
<p></p>
</body>
</html>